# Roadio Firmware Configuration
# Zephyr v4.3.0 - Nucleo-H723ZG

# ========================================
# Kernel Configuration
# ========================================
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_HEAP_MEM_POOL_SIZE=8192

# ========================================
# Logging Configuration
# ========================================
CONFIG_LOG=y
CONFIG_LOG_MODE_IMMEDIATE=y
CONFIG_LOG_DEFAULT_LEVEL=3

# ========================================
# Console/Shell Configuration
# ========================================
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y
CONFIG_SERIAL=y

# Optional: Enable shell for debugging/testing
CONFIG_SHELL=y
CONFIG_SHELL_BACKEND_SERIAL=y
CONFIG_SHELL_PROMPT_UART="roadio:~$ "

# ========================================
# CAN/FDCAN Configuration
# ========================================
CONFIG_CAN=y
CONFIG_CAN_INIT_PRIORITY=80

# Enable CAN shell for testing (optional - can disable in production)
CONFIG_CAN_SHELL=y

# CAN ISO-TP (Transport Protocol) for multi-frame messages
# Useful for UDS/OBD diagnostics
CONFIG_ISOTP=y

# ========================================
# GPIO Configuration
# ========================================
CONFIG_GPIO=y

# ========================================
# SPI Configuration (for W25Q128 flash)
# ========================================
CONFIG_SPI=y

# ========================================
# Flash & Storage Configuration
# ========================================
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_FLASH_PAGE_LAYOUT=y

# SPI NOR flash support (for W25Q128)
CONFIG_SPI_NOR=y
CONFIG_SPI_NOR_FLASH_LAYOUT_PAGE_SIZE=4096

# File system support
CONFIG_FILE_SYSTEM=y
CONFIG_FILE_SYSTEM_LITTLEFS=y

# Non-Volatile Storage (NVS) - lightweight key-value storage
CONFIG_NVS=y
CONFIG_NVS_LOG_LEVEL_DBG=n

# Optional: Flash simulator for testing (disable for production)
# CONFIG_FLASH_SIMULATOR=y

# ========================================
# Networking Configuration (for future use)
# ========================================
# Uncomment when adding network features (nRF7002 Wi-Fi, etc.)
# CONFIG_NETWORKING=y
# CONFIG_NET_IPV4=y
# CONFIG_NET_IPV6=y
# CONFIG_NET_TCP=y
# CONFIG_NET_UDP=y
# CONFIG_NET_DHCPV4=y

# ========================================
# USB Configuration (optional)
# ========================================
# Uncomment if using USB for console or data transfer
# CONFIG_USB_DEVICE_STACK=y
# CONFIG_USB_DEVICE_PRODUCT="Roadio OBD-II Device"
# CONFIG_USB_DEVICE_VID=0x2FE3
# CONFIG_USB_DEVICE_PID=0x0001

# ========================================
# Power Management (optional)
# ========================================
# Uncomment for low-power applications
# CONFIG_PM=y
# CONFIG_PM_DEVICE=y

# ========================================
# Watchdog (recommended for production)
# ========================================
# CONFIG_WATCHDOG=y
# CONFIG_WDT_DISABLE_AT_BOOT=n

# ========================================
# System Clock Configuration
# ========================================
# STM32H7 can run up to 550 MHz
# Default is usually fine, adjust if needed
# CONFIG_SYS_CLOCK_HW_CYCLES_PER_SEC=550000000

# ========================================
# Debug Configuration
# ========================================
# Enable for development, disable for production
CONFIG_DEBUG=y
CONFIG_DEBUG_OPTIMIZATIONS=y

# Assert configuration
CONFIG_ASSERT=y
CONFIG_ASSERT_LEVEL=2

# ========================================
# Thread Configuration
# ========================================
CONFIG_THREAD_NAME=y
CONFIG_THREAD_STACK_INFO=y

# ========================================
# Memory Protection (optional)
# ========================================
# CONFIG_ARM_MPU=y

# ========================================
# POSIX API (if needed for portability)
# ========================================
# CONFIG_POSIX_API=y
